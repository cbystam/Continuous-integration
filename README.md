#  Continuous-integration

DD2480 Group 23: 
-   Ahmet Oguz Engin.
-   Anton Ärnbäck.
-   Carin Bystam.
-   Gabriel Staifo.

# Introduction

Continuous integration is a software development technique that involves regularly merging code changes into a shared repository. The integration process is automatically checked by a continuous integration server, which performs an automated build and test. The outcome of this process is then sent to relevant users by the server.

## Gradle commands

-   `gradle build`: This command will build the project and create the executable files.
-   `gradle run`: This command will run the project.
-   `gradle test`: This command will run all the tests defined in the project.
-   `gradle clean`: This command will delete all the build files generated by previous builds.

## Cloning

The repo is cloned using JGit. The URI and branch is specified in the method. To test this, 2 tests are made to test the correct response is made when an invalid URL respectively branch is given as parameters. Also one test when a successful clone is made which finds a txt file in the test repo and makes sure a code string located in the test repo is found.

## Building

The build functions get a path for the repo that will be built using Gradle. The function creates an object that specifies the command to run for the corresponding operative system. Then another object is used to start a new process, which runs the specified command. Finally, the method returns the object which includes whether the build succeeded or not.

## Testing

The test method creates another process to call "gradle test" method on the shell. According the exit value of the created process, it fills the related field of the "TestInfo" model. And it also provides details about the tests.  
2 Unit tests are implemented to test that method.   
One for "SUCCESSFUL" (all tests are passed)
One for "FAILURE" (at least one test is failed)

## Run the server

Use the [gradle](https://gradle.org/releases/) to run the server.

```bash
gradle run --no-build-cache
```

## Run the test

Use the [gradle](https://gradle.org/releases/) to run the tests.

```bash
gradle test --no-build-cache
```
**_NOTE:_** --no-build-cache should be used to avoid problems while cloning the repo.


## Notification

Notification has been implemented using javax.mail. A group gmail was created which the server sends the mails from, and is hard-coded to send to one member of the group.
The mail contains the results from the build: Either that the compilation and testing was successful, or that the compilation or the testing was unsuccessful and in that case information about what went wrong. 


## Contributions

- Ahmet Oguz: Necessary dependencies to run the server are added to the project. JSONConverter function is implemented. runTests method is implemented, two unit tests are added. Helped for implementation of build method and tests. Using all the methods implemented, CI Server is created. Minor bugs are fixed. DeleteRepo method is implemented with Anton. Assessment repo/branch is created. Rearranged the readme file. 
- Anton Ärnbäck: Implemented the cloning feature and all the corresponding methods and tests. This feature clones the GitHub repo from a remote URI. Also worked on the delete method with Oguz. General refactoring and the initial experiments with ngrok.
- Carin Bystam: 1: Added the initial setup for the project build. 2: Added the provided skeleton code to the repo. 5: Deleted the ngrok files from the repo as they conflicted between OS. 19: Implemented the mail method and all corresponding tests. 43: Added mac compatibility for clone testing.
- Gabriel Staifo: Implemented a function that build a cloned repo. The functions builds a Gradle project and returns an object contains information about the build. So if the build was succeeded the object will sets to “SUCCESSFUL” otherwise it will be “FAILURE”. Two tests for this function were implemented, one for success and one for failure.
